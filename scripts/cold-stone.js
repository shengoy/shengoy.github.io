"use strict";var themes={dark:"dark",light:"light"},documentHead=document.getElementsByTagName("head")[0],localTheme=localStorage.getItem("theme"),isDarkMode=window.matchMedia("(prefers-color-scheme: dark)").matches,darkThemeHref="https://cdn.bootcss.com/highlight.js/9.15.10/styles/atom-one-dark.min.css";function insertThemeDarkLink(){var e=document.createElement("link");e.rel="stylesheet",e.href=darkThemeHref,documentHead.appendChild(e)}function removeThemeDarkLink(){for(var e=document.querySelectorAll("link"),t=0;t<e.length;t++){var r=e[t];r.href===darkThemeHref&&documentHead.removeChild(r)}}"serviceWorker"in navigator&&window.addEventListener("load",function(){var e=window.COLD_STONE.root+"sw.js";navigator.serviceWorker.register(e)});var uscript,isDarkTheme,timeout,path=location.pathname,navLinkList=Array.from(document.querySelectorAll(".nav-list-item")),navs=["/tags/","/about/","/friends/","/projects/","/archives/","/categories/"],tocLinkList=("/"===path||/page/.test(path)?navLinkList[0].classList.add("active"):navs.forEach(function(t,e){var r;t!==path||(r=navLinkList.find(function(e){return e.dataset.link===t}))&&r.classList.add("active")}),document.querySelectorAll(".toc-link")),loader=(tocLinkList.forEach(function(e){var t=e.href.replace(location.origin+"/",location.href);e.setAttribute("href",t)}),document.getElementById("loader")),utteranc=document.getElementById("utteranc"),back=(utteranc&&((uscript=document.createElement("script")).async=!0,uscript.crossOrigin="anonymous",uscript.src="https://utteranc.es/client.js",uscript.setAttribute("repo",window.COLD_STONE.repo),uscript.setAttribute("issue-term","pathname"),(isDarkTheme=isDarkMode||localTheme===themes.dark)?(insertThemeDarkLink(),uscript.setAttribute("theme","github-dark")):(uscript.setAttribute("theme","github-light"),removeThemeDarkLink()),utteranc.appendChild(uscript),timeout=setTimeout(function(){loader.remove(),clearTimeout(timeout)},3e3)),document.getElementById("back")),backTop=(back&&back.addEventListener("click",function(){history.back()}),document.getElementById("backTop")),toggle=(backTop&&(window.addEventListener("scroll",function(){var e=document.scrollingElement,t=e.scrollTop;e.scrollHeight<=t+e.clientHeight?backTop.classList.add("show"):backTop.classList.remove("show")}),backTop.addEventListener("click",function(){window.scroll({top:0,left:0,behavior:"smooth"})})),document.querySelector(".footer-toggle")),darkBtn=document.querySelector(".dark-btn"),lightBtn=document.querySelector(".light-btn");function findTheme(e){var t=e.dataset.theme;return t||findTheme(e.parentElement)}localTheme===themes.dark?(document.body.classList.add("dark"),insertThemeDarkLink(),darkBtn&&(darkBtn.classList.remove("show"),lightBtn.classList.add("show"))):(removeThemeDarkLink(),darkBtn&&(lightBtn.classList.remove("show"),darkBtn.classList.add("show"))),toggle&&toggle.addEventListener("click",function(e){e=findTheme(e.target);switch(localStorage.setItem("theme",e),e){case themes.dark:document.body.classList.add("dark"),darkBtn.classList.remove("show"),lightBtn.classList.add("show");break;case themes.light:removeThemeDarkLink(),document.body.classList.remove("dark"),lightBtn.classList.remove("show"),darkBtn.classList.add("show")}});var articleToc,article=document.querySelector(".article");article&&(articleToc=document.querySelector(".article-toc"),article.addEventListener("mouseenter",function(){articleToc.classList.add("fade")}),article.addEventListener("mouseleave",function(){articleToc.classList.remove("fade")}));